(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],a=!0,s=1;s<o.length;s++){var c=o[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=o[0]))}return e}var a={},n={app:0},i=[];function r(t){if(a[t])return a[t].exports;var o=a[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=a,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"029a":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var a=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{attrs:{id:"inspire"}},[o("Login",{directives:[{name:"show",rawName:"v-show",value:e.ShowOnline&&!e.LoggedOn,expression:"ShowOnline && !LoggedOn"}],on:{"auth-success":function(t){e.LoggedOn=!0}}}),o("v-navigation-drawer",{attrs:{app:"",clipped:"",dark:"",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[e.SelectedLocation?o("div",{staticClass:"pa-2 my-5"},[o("v-btn",{attrs:{block:"",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.AddPlot(t)}}},[e._v("Add Plot")])],1):e._e()]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.SelectedLocation?o("v-list",e._l(e.PlotList,(function(t){return o("v-list-item",{key:t.PlotNumber,attrs:{link:""}},[o("v-list-item-action",{on:{click:function(o){return e.SelectPlot(t)}}},[o("v-icon",[e._v("mdi-pine-tree")])],1),o("v-list-item-content",{on:{click:function(o){return e.SelectPlot(t)}}},[o("v-list-item-title",[e._v("Plot "+e._s(t.plot_number))])],1),o("v-btn",{attrs:{text:"",icon:"",color:"accent"},on:{click:function(o){return o.stopPropagation(),e.DeletePlot(t.plot_number)}}},[o("v-icon",[e._v("mdi-delete")])],1)],1)})),1):e._e()],1),o("v-app-bar",{attrs:{app:"","clipped-left":"",color:"primary",dark:""}},[o("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),o("v-toolbar-title",[e._v("Tree - Con")]),o("v-spacer"),o("v-autocomplete",{staticClass:"mt-3",attrs:{items:e.Locations,label:"Location","item-text":"name","item-value":"id",clearable:"",dense:"","hide-details":""},on:{change:e.LocationChange},model:{value:e.SelectedLocation,callback:function(t){e.SelectedLocation=t},expression:"SelectedLocation"}})],1),o("v-overlay",{attrs:{value:e.Loading}},[o("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),o("v-content",[o("v-container",{attrs:{fluid:""}},[e.SelectedLocation?o("v-row",[e.SelectedLocation?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("BAF")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.BAF))])],1)],1)],1):e._e(),e.PlotStats?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("Slope")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.slope)+"%")])],1)],1)],1):e._e(),e.PlotStats?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("Alive")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.alive_trees))])],1)],1)],1):e._e(),e.PlotStats?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("Dead")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.dead_pine))])],1)],1)],1):e._e(),e.PlotStats?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("Type")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.timber_type))])],1)],1)],1):e._e(),e.PlotStats?o("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[o("v-fade-transition",[o("v-card",[o("v-card-title",{staticClass:"text-no-wrap"},[e._v("BD")]),o("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.bd_percent)+"%")])],1)],1)],1):e._e()],1):e._e(),o("v-row",[o("v-col",[o("v-fade-transition",[e.SelectedPlotData?o("Table",{attrs:{Config:e.Config,Internet:e.Internet,PlotKey:e.SelectedPlot,Species:e.Species},model:{value:e.SelectedPlotData,callback:function(t){e.SelectedPlotData=t},expression:"SelectedPlotData"}}):e._e()],1)],1)],1)],1)],1),o("v-footer",{attrs:{app:""}},[o("span",[e._v("Josh Dollinger Â© 2019")])])],1)},i=[],r=(o("4de4"),o("7db0"),o("4160"),o("13d5"),o("fb6a"),o("159b"),o("bc3a")),s=o.n(r),c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.overlay?o("v-app",{attrs:{id:"inspire"}},[o("v-content",[o("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[o("v-overlay",{attrs:{value:e.overlay}},[o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{cols:"12"}},[o("v-card",{staticClass:"elevation-12",attrs:{light:""}},[o("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""}},[o("v-toolbar-title",[e._v("Login")])],1),o("v-card-text",[o("v-form",[o("v-text-field",{attrs:{label:"Login",name:"login",type:"text","prepend-icon":"mdi-account"},model:{value:e.Params.username,callback:function(t){e.$set(e.Params,"username",t)},expression:"Params.username"}}),o("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.Params.password,callback:function(t){e.$set(e.Params,"password",t)},expression:"Params.password"}})],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.GetToken(t)}}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1):e._e()},l=[],u="https://tree-con.herokuapp.com/api/v1/auth/login/",d={props:{source:String},data:function(){return{Config:{headers:{Authorization:""}},Params:{username:"",password:"",email:""},overlay:!0}},localStorage:{TokenConfig:{type:Object},UserParams:{type:Object}},methods:{GetToken:function(){var e=this;s.a.post(u,e.Params,e.Config).then((function(t){e.Config.headers.Authorization="Token "+t.data.key,e.$localStorage.set("TokenConfig",e.Config),e.$localStorage.set("UserParams",e.Params),e.$emit("auth-success")})).catch((function(e){alert(e)}))}}},p=d,f=o("2877"),v=o("6544"),h=o.n(v),g=o("7496"),m=o("8336"),_=o("b0af"),b=o("99d9"),S=o("62ad"),P=o("a523"),L=o("a75b"),y=o("4bd4"),k=o("a797"),x=o("0fd9"),w=o("2fa4"),C=o("8654"),V=o("71d9"),T=o("2a7f"),O=Object(f["a"])(p,c,l,!1,null,null,null),D=O.exports;h()(O,{VApp:g["a"],VBtn:m["a"],VCard:_["a"],VCardActions:b["a"],VCardText:b["b"],VCol:S["a"],VContainer:P["a"],VContent:L["a"],VForm:y["a"],VOverlay:k["a"],VRow:x["a"],VSpacer:w["a"],VTextField:C["a"],VToolbar:V["a"],VToolbarTitle:T["a"]});var $=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",[o("v-data-table",{attrs:{headers:e.Headers,items:e.value,"hide-default-footer":"","sort-by":["tree"]},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[o("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.DeleteTree(a)}}},[e._v("mdi-delete")])]}},{key:"item.tree_species",fn:function(t){return[o("v-edit-dialog",{on:{save:function(o){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[o("v-select",{attrs:{label:"Species",items:e.Species,"item-text":"species_name","item-value":"id","single-line":""},model:{value:t.item.tree_species,callback:function(o){e.$set(t.item,"tree_species",o)},expression:"props.item.tree_species"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.Species[t.item.tree_species-1].species_name)+" ")])]}},{key:"item.dbh",fn:function(t){return[o("v-edit-dialog",{on:{save:function(o){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[o("v-text-field",{attrs:{label:"DBH","single-line":"",autofocus:""},model:{value:t.item.dbh,callback:function(o){e.$set(t.item,"dbh",o)},expression:"props.item.dbh"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.dbh)+" ")])]}},{key:"item.height",fn:function(t){return[o("v-edit-dialog",{on:{save:function(o){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[o("v-text-field",{attrs:{label:"Height","single-line":"",autofocus:""},model:{value:t.item.height,callback:function(o){e.$set(t.item,"height",o)},expression:"props.item.height"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.height)+" ")])]}},{key:"item.gross_piece_size",fn:function(t){return[o("v-edit-dialog",{on:{save:function(o){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[o("v-text-field",{attrs:{label:"Gross PS","single-line":"",autofocus:""},model:{value:t.item.gross_piece_size,callback:function(o){e.$set(t.item,"gross_piece_size",o)},expression:"props.item.gross_piece_size"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.gross_piece_size)+" ")])]}},{key:"item.net_piece_size",fn:function(t){return[o("v-edit-dialog",{on:{save:function(o){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[o("v-text-field",{attrs:{label:"Net PS","single-line":"",autofocus:""},model:{value:t.item.net_piece_size,callback:function(o){e.$set(t.item,"net_piece_size",o)},expression:"props.item.net_piece_size"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.net_piece_size)+" ")])]}}])}),o("v-btn",{staticClass:"my-5",attrs:{color:"secondary"},on:{click:e.AddTree}},[e._v("Add Tree")]),o("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),o("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],1)],1)},j=[],A=(o("c975"),o("a434"),{name:"PlotTable",props:["value","Internet","Config","PlotKey","Species"],data:function(){return{snack:!1,snackColor:"",snackText:"",Headers:[{text:"Actions",value:"action",sortable:!1},{text:"Tree",value:"tree"},{text:"Species",value:"tree_species"},{text:"DBH",value:"dbh"},{text:"Height",value:"height"},{text:"Gross PS",value:"gross_piece_size"},{text:"Net PS",value:"net_piece_size"}]}},methods:{save:function(e){this.snack=!0,this.snackColor="success",this.snackText="Data saved",this.SaveTreeData(e)},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},AddTree:function(){for(var e=this,t=1,o=this.value.reduce((function(e,t){return e[t["tree"]]=!0,e}),{}),a=1;o[a];a++)t=a<=0?1:a+1;var n={plot_key:e.PlotKey,tree:t,tree_species:1,dbh:0,height:0,gross_piece_size:0,net_piece_size:0};e.Internet?(e.SaveTreeData(n),e.value.push(n)):e.value.push(n)},DeleteTree:function(e){var t=this,o=t.value.indexOf(e);t.value.splice(o,1),s.a.delete("https://tree-con.herokuapp.com/api/v1/core/plot-datas/"+e.id+"/",t.Config).then((function(o){204==o.status&&(t.value=t.value.filter((function(t){return t.id!==e.id})))})).catch((function(e){alert(e),t.RetryLogin()}))},SaveTreeData:function(e){var t=this;s.a.post("https://tree-con.herokuapp.com/api/v1/core/plot-datas/",e,t.Config).then((function(e){if(e.data.id)return e.data.id})).catch((function(e){alert(e)}))}}}),B=A,z=o("8fea"),I=o("7679"),F=o("132d"),R=o("b974"),G=o("2db4"),N=Object(f["a"])(B,$,j,!1,null,null,null),E=N.exports;h()(N,{VBtn:m["a"],VCol:S["a"],VDataTable:z["a"],VEditDialog:I["a"],VIcon:F["a"],VRow:x["a"],VSelect:R["a"],VSnackbar:G["a"],VTextField:C["a"]});var H={Base:"https://tree-con.herokuapp.com/api/v1/",LatLong:"core/lat-longs/",Locations:"core/locations/",PlotData:"core/plot-datas/",Plots:"core/plot/",Species:"core/species/"},M={name:"TreeCon",components:{Login:D,Table:E},data:function(){return{drawer:!1,Loading:!1,Internet:navigator.onLine,ShowOnline:!0,LoggedOn:!1,Locations:[],SelectedLocation:"",Plots:[{}],SelectedPlot:"",SelectedPlotData:"",Species:{},Config:{headers:{Authorization:""}}}},localStorage:{LocalPlots:{type:Array},LocalSpecies:{type:Object},LocalLocation:{type:Object}},created:function(){},mounted:function(){window.addEventListener("online",this.UpdateOnlineStatus),window.addEventListener("offline",this.UpdateOnlineStatus),this.CheckLocal()},watch:{Internet:function(e){var t=this;e&&(this.ShowOnline=!0,setTimeout((function(){t.ShowOnline=!1}),1e3))},LoggedOn:function(){this.LoggedOn&&(this.Config=this.$localStorage.get("TokenConfig"),this.GetLocations())}},computed:{PlotList:function(){var e=this.Plots.slice(0).sort((function(e,t){return e.plot_number-t.plot_number}));return this.$localStorage.set("LocalPlots",e),e},BAF:function(){var e=this;return this.SelectedLocation&&this.Internet?this.Locations.find((function(t){return t.id===e.SelectedLocation})).baf:this.Locations.baf}},methods:{updateOnlineStatus:function(e){var t=e.type;this.Internet="online"===t},GetLocations:function(){var e=this;s.a.get(H.Base+H.Locations+"?format=json",e.Config).then((function(t){e.Locations=t.data.results})).catch((function(t){alert(t),e.RetryLogin()}))},GetPlotData:function(){var e=this;e.SelectedPlotData="",e.Plots.length>0&&e.Plots[0].id?(e.Plots.forEach((function(t){s.a.get(H.Base+H.PlotData+"?plot_key="+t.id+"&ordering=id&format=json",e.Config).then((function(o){t["PlotData"]=o.data.results,e.$set(t,"PlotData",o.data.results)})).catch((function(o){alert(H.Base+H.PlotData+"?plot_key="+t.id+"&ordering=id&format=json"),alert(o),e.RetryLogin()}))})),e.$localStorage.set("LocalPlots",e.Plots),e.Loading=!1):e.Loading=!1},GetSpecies:function(){var e=this;s.a.get(H.Base+H.Species+"?format=json",e.Config).then((function(t){e.Species=t.data.results,e.$localStorage.set("LocalSpecies",e.Species)})).catch((function(t){alert(t),e.RetryLogin()}))},RetryLogin:function(){var e=this;e.LoggedOn=!1,e.Loading=!1},LocationChange:function(){var e=this;e.SelectedLocation&&(e.Loading=!0,s.a.get(H.Base+H.Plots+"?location="+e.SelectedLocation+"&ordering=id&format=json",e.Config).then((function(t){e.SelectedPlot="",e.Plots=t.data.results,e.$set(e.Plots,t.data.results),e.GetPlotData(),e.GetSpecies(),e.$localStorage.set("LocalLocation",e.Locations.find((function(t){return t.id===e.SelectedLocation})))})).catch((function(t){alert(t),e.RetryLogin()})))},SelectPlot:function(e){this.SelectedPlotData=e.PlotData,this.SelectedPlot=e.id,this.drawer=!1},AddPlot:function(){for(var e=1,t=this,o=this.Plots.reduce((function(e,t){return e[t["plot_number"]]=!0,e}),{}),a=1;o[a];a++)e=a<=0?1:a+1;var n={location:t.SelectedLocation,plot_number:e,PlotData:[],slope:0,alive_trees:0,dead_pine:0,bd_percent:0,gross_volume_ha:0,net_volume_ha:0,timber_type:"Pi/Sx"};t.Internet?s.a.post(H.Base+H.Plots,n,t.Config).then((function(e){e.data.id&&(n["id"]=e.data.id,t.Plots.push(n))})).catch((function(e){alert(e),t.RetryLogin()})):t.Plots.push(n)},DeletePlot:function(e){var t=this;if(t.Internet){var o=t.Plots.find((function(t){return t.plot_number==e})).id;s.a.delete(H.Base+H.Plots+o+"/",t.Config).then((function(o){204==o.status&&(t.Plots=t.Plots.filter((function(t){return t.plot_number!==e})))})).catch((function(e){alert(e),t.RetryLogin()}))}else t.Plots=t.Plots.filter((function(t){return t.plot_number!==e}))},CheckLocal:function(){"undefined"!=localStorage.TokenConfig&&(this.Config=this.$localStorage.get("TokenConfig"),this.LoggedOn=!0),"undefined"!=localStorage.LocalPlots&&(this.Plots=this.$localStorage.get("LocalPlots")),"undefined"!=localStorage.LocalSpecies&&(this.Species=this.$localStorage.get("LocalSpecies")),"undefined"==localStorage.LocalLocation||this.Internet||(this.Locations=this.$localStorage.get("LocalLocation"),this.SelectedLocation=this.$localStorage.get("LocalLocation").id)}}},U=M,J=(o("cf25"),o("40dc")),K=o("5bc1"),q=o("c6a6"),Q=o("0789"),W=o("553a"),X=o("8860"),Y=o("da13"),Z=o("1800"),ee=o("5d23"),te=o("f774"),oe=o("490a"),ae=Object(f["a"])(U,n,i,!1,null,null,null),ne=ae.exports;h()(ae,{VApp:g["a"],VAppBar:J["a"],VAppBarNavIcon:K["a"],VAutocomplete:q["a"],VBtn:m["a"],VCard:_["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:S["a"],VContainer:P["a"],VContent:L["a"],VFadeTransition:Q["c"],VFooter:W["a"],VIcon:F["a"],VList:X["a"],VListItem:Y["a"],VListItemAction:Z["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VNavigationDrawer:te["a"],VOverlay:k["a"],VProgressCircular:oe["a"],VRow:x["a"],VSpacer:w["a"],VToolbarTitle:T["a"]});o("5363");var ie=o("f309");a["a"].use(ie["a"]);var re=new ie["a"]({theme:{themes:{light:{primary:"#474747",secondary:"#216073",accent:"#FF5722",error:"#c55e5e",success:"#368141",warning:"#ffe033"}}},icons:{iconfont:"mdi"}}),se=o("9483");Object(se["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),window.location.reload(!0)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ce=o("ead5"),le=o.n(ce);a["a"].use(le.a),a["a"].config.productionTip=!1,new a["a"]({vuetify:re,render:function(e){return e(ne)}}).$mount("#app")},cf25:function(e,t,o){"use strict";var a=o("029a"),n=o.n(a);n.a}});
//# sourceMappingURL=app.8497b56f.js.map