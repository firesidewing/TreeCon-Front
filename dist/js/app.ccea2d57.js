(function(e){function t(t){for(var a,r,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"029a":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("Login",{directives:[{name:"show",rawName:"v-show",value:e.ShowOnline&&!e.LoggedOn,expression:"ShowOnline && !LoggedOn"}],on:{"auth-success":function(t){e.LoggedOn=!0}}}),n("v-navigation-drawer",{attrs:{app:"",clipped:"",dark:"",color:"primary"},scopedSlots:e._u([{key:"append",fn:function(){return[e.SelectedLocation?n("div",{staticClass:"pa-2"},[n("v-btn",{attrs:{block:"",color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.AddPlot(t)}}},[e._v("Add Plot")])],1):e._e()]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[e.SelectedLocation?n("v-list",e._l(e.PlotList,(function(t){return n("v-list-item",{key:t.PlotNumber,attrs:{link:""}},[n("v-list-item-action",{on:{click:function(n){return e.SelectPlot(t)}}},[n("v-icon",[e._v("mdi-pine-tree")])],1),n("v-list-item-content",{on:{click:function(n){return e.SelectPlot(t)}}},[n("v-list-item-title",[e._v("Plot "+e._s(t.plot_number))])],1),n("v-btn",{attrs:{text:"",icon:"",color:"accent"},on:{click:function(n){return n.stopPropagation(),e.DeletePlot(t.plot_number)}}},[n("v-icon",[e._v("mdi-delete")])],1)],1)})),1):e._e()],1),n("v-app-bar",{attrs:{app:"","clipped-left":"",color:"primary",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Tree - Con")]),n("v-spacer"),n("v-autocomplete",{staticClass:"mt-3",attrs:{items:e.Locations,label:"Location","item-text":"name","item-value":"id",clearable:"",dense:""},on:{change:e.LocationChange},model:{value:e.SelectedLocation,callback:function(t){e.SelectedLocation=t},expression:"SelectedLocation"}})],1),n("v-overlay",{attrs:{value:e.Loading}},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),n("v-content",[n("v-container",{attrs:{fluid:""}},[e.SelectedLocation?n("v-row",[e.SelectedLocation?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("BAF")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.BAF))])],1)],1)],1):e._e(),e.PlotStats?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("Slope")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.slope)+"%")])],1)],1)],1):e._e(),e.PlotStats?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("Alive")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.alive_trees))])],1)],1)],1):e._e(),e.PlotStats?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("Dead")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.dead_pine))])],1)],1)],1):e._e(),e.PlotStats?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("Type")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.timber_type))])],1)],1)],1):e._e(),e.PlotStats?n("v-col",{attrs:{sm:"3",md:"2",lg:"2"}},[n("v-fade-transition",[n("v-card",[n("v-card-title",{staticClass:"text-no-wrap"},[e._v("BD")]),n("v-card-text",{staticClass:"headline text-no-wrap"},[e._v(e._s(e.PlotStats.bd_percent)+"%")])],1)],1)],1):e._e()],1):e._e(),n("v-row",[n("v-col",[n("v-fade-transition",[e.SelectedPlotData?n("Table",{attrs:{Config:e.Config,Internet:e.Internet,PlotKey:e.SelectedPlot,Species:e.Species},model:{value:e.SelectedPlotData,callback:function(t){e.SelectedPlotData=t},expression:"SelectedPlotData"}}):e._e()],1)],1)],1)],1)],1),n("v-footer",{attrs:{app:""}},[n("span",[e._v("Josh Dollinger Â© 2019")])])],1)},i=[],r=(n("4de4"),n("7db0"),n("4160"),n("caad"),n("13d5"),n("fb6a"),n("4fad"),n("c1f9"),n("159b"),n("3835")),s=n("bc3a"),c=n.n(s),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.overlay?n("v-app",{attrs:{id:"inspire"}},[n("v-content",[n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-overlay",{attrs:{value:e.overlay}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12"}},[n("v-card",{staticClass:"elevation-12",attrs:{light:""}},[n("v-toolbar",{attrs:{color:"secondary",dark:"",flat:""}},[n("v-toolbar-title",[e._v("Login")])],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Login",name:"login",type:"text","prepend-icon":"mdi-account"},model:{value:e.Params.username,callback:function(t){e.$set(e.Params,"username",t)},expression:"Params.username"}}),n("v-text-field",{attrs:{label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},model:{value:e.Params.password,callback:function(t){e.$set(e.Params,"password",t)},expression:"Params.password"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary"},on:{click:function(t){return t.stopPropagation(),e.GetToken(t)}}},[e._v("Login")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1):e._e()},d=[],u="https://tree-con.herokuapp.com/api/v1/auth/login/",p={props:{source:String},data:function(){return{Config:{headers:{Authorization:""}},Params:{username:"",password:"",email:""},overlay:!0}},localStorage:{TokenConfig:{type:Object},UserParams:{type:Object}},methods:{GetToken:function(){var e=this;c.a.post(u,e.Params,e.Config).then((function(t){e.Config.headers.Authorization="Token "+t.data.key,e.$localStorage.set("TokenConfig",e.Config),e.$localStorage.set("UserParams",e.Params),e.$emit("auth-success")})).catch((function(e){alert(e)}))}}},f=p,v=n("2877"),h=n("6544"),g=n.n(h),m=n("7496"),_=n("8336"),b=n("b0af"),S=n("99d9"),P=n("62ad"),L=n("a523"),y=n("a75b"),k=n("4bd4"),x=n("a797"),w=n("0fd9"),C=n("2fa4"),V=n("8654"),T=n("71d9"),O=n("2a7f"),D=Object(v["a"])(f,l,d,!1,null,null,null),j=D.exports;g()(D,{VApp:m["a"],VBtn:_["a"],VCard:b["a"],VCardActions:S["a"],VCardText:S["b"],VCol:P["a"],VContainer:L["a"],VContent:y["a"],VForm:k["a"],VOverlay:x["a"],VRow:w["a"],VSpacer:C["a"],VTextField:V["a"],VToolbar:T["a"],VToolbarTitle:O["a"]});var $=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-data-table",{attrs:{headers:e.Headers,items:e.value,"hide-default-footer":"","sort-by":["tree"]},scopedSlots:e._u([{key:"item.action",fn:function(t){var a=t.item;return[n("v-icon",{attrs:{small:"",color:"error"},on:{click:function(t){return e.DeleteTree(a)}}},[e._v("mdi-delete")])]}},{key:"item.tree_species",fn:function(t){return[n("v-edit-dialog",{on:{save:function(n){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-select",{attrs:{label:"Species",items:e.Species,"item-text":"species_name","item-value":"id","single-line":""},model:{value:t.item.tree_species,callback:function(n){e.$set(t.item,"tree_species",n)},expression:"props.item.tree_species"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(e.Species[t.item.tree_species-1].species_name)+" ")])]}},{key:"item.dbh",fn:function(t){return[n("v-edit-dialog",{on:{save:function(n){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"DBH","single-line":""},model:{value:t.item.dbh,callback:function(n){e.$set(t.item,"dbh",n)},expression:"props.item.dbh"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.dbh)+" ")])]}},{key:"item.height",fn:function(t){return[n("v-edit-dialog",{on:{save:function(n){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"Height","single-line":""},model:{value:t.item.height,callback:function(n){e.$set(t.item,"height",n)},expression:"props.item.height"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.height)+" ")])]}},{key:"item.gross_piece_size",fn:function(t){return[n("v-edit-dialog",{on:{save:function(n){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"Gross PS","single-line":""},model:{value:t.item.gross_piece_size,callback:function(n){e.$set(t.item,"gross_piece_size",n)},expression:"props.item.gross_piece_size"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.gross_piece_size)+" ")])]}},{key:"item.net_piece_size",fn:function(t){return[n("v-edit-dialog",{on:{save:function(n){return e.save(t.item)},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{label:"Net PS","single-line":""},model:{value:t.item.net_piece_size,callback:function(n){e.$set(t.item,"net_piece_size",n)},expression:"props.item.net_piece_size"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.net_piece_size)+" ")])]}}])}),n("v-btn",{staticClass:"my-5",attrs:{color:"secondary"},on:{click:e.AddTree}},[e._v("Add Tree")]),n("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],1)],1)},A=[],B=(n("c975"),n("a434"),{name:"PlotTable",props:["value","Internet","Config","PlotKey","Species"],data:function(){return{snack:!1,snackColor:"",snackText:"",Headers:[{text:"Actions",value:"action",sortable:!1},{text:"Tree",value:"tree"},{text:"Species",value:"tree_species"},{text:"DBH",value:"dbh"},{text:"Height",value:"height"},{text:"Gross PS",value:"gross_piece_size"},{text:"Net PS",value:"net_piece_size"}]}},methods:{save:function(e){this.snack=!0,this.snackColor="success",this.snackText="Data saved",this.SaveTreeData(e)},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},AddTree:function(){for(var e=this,t=1,n=this.value.reduce((function(e,t){return e[t["tree"]]=!0,e}),{}),a=1;n[a];a++)t=a<=0?1:a+1;var o={plot_key:e.PlotKey,tree:t,tree_species:1,dbh:0,height:0,gross_piece_size:0,net_piece_size:0};e.Internet?(e.SaveTreeData(o),e.value.push(o)):e.value.push(o)},DeleteTree:function(e){var t=this,n=t.value.indexOf(e);t.value.splice(n,1),c.a.delete("https://tree-con.herokuapp.com/api/v1/core/plot-datas/"+e.id+"/",t.Config).then((function(n){204==n.status&&(t.value=t.value.filter((function(t){return t.id!==e.id})))})).catch((function(e){alert(e),t.RetryLogin()}))},SaveTreeData:function(e){var t=this;c.a.post("https://tree-con.herokuapp.com/api/v1/core/plot-datas/",e,t.Config).then((function(e){if(e.data.id)return e.data.id})).catch((function(e){alert(e)}))}}}),z=B,I=n("8fea"),F=n("7679"),R=n("132d"),G=n("b974"),N=n("2db4"),E=Object(v["a"])(z,$,A,!1,null,null,null),H=E.exports;g()(E,{VBtn:_["a"],VCol:P["a"],VDataTable:I["a"],VEditDialog:F["a"],VIcon:R["a"],VRow:w["a"],VSelect:G["a"],VSnackbar:N["a"],VTextField:V["a"]});var J={Base:"https://tree-con.herokuapp.com/api/v1/",LatLong:"core/lat-longs/",Locations:"core/locations/",PlotData:"core/plot-datas/",Plots:"core/plot/",Species:"core/species/"},M={name:"TreeCon",components:{Login:j,Table:H},data:function(){return{drawer:!1,Loading:!1,Internet:navigator.onLine,ShowOnline:!0,LoggedOn:!1,Locations:[],SelectedLocation:"",Plots:[{}],SelectedPlot:"",SelectedPlotData:"",Species:{},Config:{headers:{Authorization:""}}}},localStorage:{LocalPlots:{type:Array},LocalSpecies:{type:Object},LocalLocation:{type:Object}},created:function(){},mounted:function(){window.addEventListener("online",this.UpdateOnlineStatus),window.addEventListener("offline",this.UpdateOnlineStatus),this.CheckLocal()},watch:{Internet:function(e){var t=this;e&&(this.ShowOnline=!0,setTimeout((function(){t.ShowOnline=!1}),1e3))},LoggedOn:function(){this.LoggedOn&&(this.Config=this.$localStorage.get("TokenConfig"),this.GetLocations())}},computed:{PlotList:function(){var e=this.Plots.slice(0).sort((function(e,t){return e.plot_number-t.plot_number}));return this.$localStorage.set("LocalPlots",e),e},BAF:function(){var e=this;return this.SelectedLocation&&this.Internet?this.Locations.find((function(t){return t.id===e.SelectedLocation})).baf:this.Locations.baf},PlotStats:function(){var e=this;if(this.SelectedPlot){var t=this.Plots.find((function(t){return t.id===e.SelectedPlot}));return Object.fromEntries(Object.entries(t).filter((function(e){var t=Object(r["a"])(e,1),n=t[0];return["slope","alive_trees","dead_pine","bd_percent","gross_volume_ha","net_volume_ha","timber_type"].includes(n)})))}return null}},methods:{updateOnlineStatus:function(e){var t=e.type;this.Internet="online"===t},GetLocations:function(){var e=this;c.a.get(J.Base+J.Locations+"?format=json",e.Config).then((function(t){e.Locations=t.data.results})).catch((function(t){alert(t),e.RetryLogin()}))},GetPlotData:function(){var e=this;e.SelectedPlotData="",e.Plots.length>0&&e.Plots[0].id?(e.Plots.forEach((function(t){alert(JSON.stringify(t)),c.a.get(J.Base+J.PlotData+"?plot_key="+t.id+"&ordering=id&format=json",e.Config).then((function(n){t["PlotData"]=n.data.results,e.$set(t,"PlotData",n.data.results)})).catch((function(n){alert(J.Base+J.PlotData+"?plot_key="+t.id+"&ordering=id&format=json"),alert(n),e.RetryLogin()}))})),e.$localStorage.set("LocalPlots",e.Plots),e.Loading=!1):e.Loading=!1},GetSpecies:function(){var e=this;c.a.get(J.Base+J.Species+"?format=json",e.Config).then((function(t){e.Species=t.data.results,e.$localStorage.set("LocalSpecies",e.Species)})).catch((function(t){alert(J.Base+J.Species+"?format=json"),alert(t),e.RetryLogin()}))},RetryLogin:function(){var e=this;e.LoggedOn=!1,e.Loading=!1},LocationChange:function(){var e=this;e.SelectedLocation&&(e.Loading=!0,c.a.get(J.Base+J.Plots+"?location="+e.SelectedLocation+"&ordering=id&format=json",e.Config).then((function(t){e.$set(e.Plots,t.data.results),alert(t.data.results[0].id),e.GetPlotData(),e.GetSpecies(),e.$localStorage.set("LocalLocation",e.Locations.find((function(t){return t.id===e.SelectedLocation})))})).catch((function(t){alert(J.Base+J.Plots+"?location="+e.SelectedLocation+"&ordering=id&format=json"),alert(t),e.RetryLogin()})))},SelectPlot:function(e){this.SelectedPlotData=e.PlotData,this.SelectedPlot=e.id,this.drawer=!1},AddPlot:function(){for(var e=1,t=this,n=this.Plots.reduce((function(e,t){return e[t["plot_number"]]=!0,e}),{}),a=1;n[a];a++)e=a<=0?1:a+1;var o={location:t.SelectedLocation,plot_number:e,PlotData:[],slope:0,alive_trees:0,dead_pine:0,bd_percent:0,gross_volume_ha:0,net_volume_ha:0,timber_type:"Pi/Sx"};t.Internet?c.a.post(J.Base+J.Plots,o,t.Config).then((function(e){e.data.id&&(o["id"]=e.data.id,t.Plots.push(o))})).catch((function(e){alert(e),t.RetryLogin()})):t.Plots.push(o)},DeletePlot:function(e){var t=this;if(t.Internet){var n=t.Plots.find((function(t){return t.plot_number==e})).id;c.a.delete(J.Base+J.Plots+n+"/",t.Config).then((function(n){204==n.status&&(t.Plots=t.Plots.filter((function(t){return t.plot_number!==e})))})).catch((function(e){alert(e),t.RetryLogin()}))}else t.Plots=t.Plots.filter((function(t){return t.plot_number!==e}))},CheckLocal:function(){"undefined"!=localStorage.TokenConfig&&(this.Config=this.$localStorage.get("TokenConfig"),this.LoggedOn=!0),"undefined"!=localStorage.LocalPlots&&(this.Plots=this.$localStorage.get("LocalPlots")),"undefined"!=localStorage.LocalSpecies&&(this.Species=this.$localStorage.get("LocalSpecies")),"undefined"==localStorage.LocalLocation||this.Internet||(this.Locations=this.$localStorage.get("LocalLocation"),this.SelectedLocation=this.$localStorage.get("LocalLocation").id)}}},U=M,K=(n("cf25"),n("40dc")),q=n("5bc1"),Q=n("c6a6"),W=n("0789"),X=n("553a"),Y=n("8860"),Z=n("da13"),ee=n("1800"),te=n("5d23"),ne=n("f774"),ae=n("490a"),oe=Object(v["a"])(U,o,i,!1,null,null,null),ie=oe.exports;g()(oe,{VApp:m["a"],VAppBar:K["a"],VAppBarNavIcon:q["a"],VAutocomplete:Q["a"],VBtn:_["a"],VCard:b["a"],VCardText:S["b"],VCardTitle:S["c"],VCol:P["a"],VContainer:L["a"],VContent:y["a"],VFadeTransition:W["c"],VFooter:X["a"],VIcon:R["a"],VList:Y["a"],VListItem:Z["a"],VListItemAction:ee["a"],VListItemContent:te["a"],VListItemTitle:te["b"],VNavigationDrawer:ne["a"],VOverlay:x["a"],VProgressCircular:ae["a"],VRow:w["a"],VSpacer:C["a"],VToolbarTitle:O["a"]});n("5363");var re=n("f309");a["a"].use(re["a"]);var se=new re["a"]({theme:{themes:{light:{primary:"#474747",secondary:"#216073",accent:"#FF5722",error:"#c55e5e",success:"#368141",warning:"#ffe033"}}},icons:{iconfont:"mdi"}}),ce=n("9483");Object(ce["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh."),window.location.reload(!0)},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var le=n("ead5"),de=n.n(le);a["a"].use(de.a),a["a"].config.productionTip=!1,new a["a"]({vuetify:se,render:function(e){return e(ie)}}).$mount("#app")},cf25:function(e,t,n){"use strict";var a=n("029a"),o=n.n(a);o.a}});
//# sourceMappingURL=app.ccea2d57.js.map